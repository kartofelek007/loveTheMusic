{"version":3,"file":"bundle.min.js","mappings":"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","sources":["webpack://projekt/./src/js/page-header.js","webpack://projekt/./src/js/_form.js","webpack://projekt/./src/js/_map.js","webpack://projekt/./src/js/app.js"],"sourcesContent":["//src/js/page-header.js\r\n\r\nfunction stickyHeader() {\r\n    const pageHeader = document.querySelector('.page-header');\r\n\r\n    if (this.pageYOffset >= 100) {\r\n        pageHeader.classList.add('sticky');\r\n    } else {\r\n        pageHeader.classList.remove('sticky');\r\n    }\r\n}\r\n\r\nfunction pageHeaderSticky() {\r\n    const media = window.matchMedia(\"(max-width: 760px)\");\r\n\r\n    if (media.matches) {\r\n        window.removeEventListener('scroll', stickyHeader);\r\n    } else {\r\n        window.addEventListener('scroll', stickyHeader);\r\n    }\r\n\r\n    media.addListener(function(media) {\r\n        if (media.matches) {\r\n            window.removeEventListener('scroll', stickyHeader);\r\n        } else {\r\n            window.addEventListener('scroll', stickyHeader);\r\n        }\r\n    });\r\n}\r\n\r\nexport { pageHeaderSticky }","function removeFieldError(field) {\r\n    const errorText = field.nextElementSibling;\r\n    if (errorText !== null) {\r\n        if (errorText.classList.contains(\"form-error-text\")) {\r\n            errorText.remove();\r\n        }\r\n    }\r\n};\r\n\r\nfunction createFieldError(field, text) {\r\n    removeFieldError(field); //przed stworzeniem usuwam by zawsze był najnowszy komunikat\r\n\r\n    const div = document.createElement(\"div\");\r\n    div.classList.add(\"form-error-text\");\r\n    div.innerText = text;\r\n    if (field.nextElementSibling === null) {\r\n        field.parentElement.appendChild(div);\r\n    } else {\r\n        if (!field.nextElementSibling.classList.contains(\"form-error-text\")) {\r\n            field.parentElement.insertBefore(div, field.nextElementSibling);\r\n        }\r\n    }\r\n};\r\n\r\nfunction toggleErrorField(field, show) {\r\n    const errorText = field.nextElementSibling;\r\n    if (errorText !== null) {\r\n        if (errorText.classList.contains(\"form-error-text\")) {\r\n            errorText.style.display = show ? \"block\" : \"none\";\r\n            errorText.setAttribute('aria-hidden', show);\r\n        }\r\n    }\r\n};\r\n\r\nfunction markFieldAsError(field, show) {\r\n    if (show) {\r\n        field.classList.add(\"field-error\");\r\n    } else {\r\n        field.classList.remove(\"field-error\");\r\n        toggleErrorField(field, false);\r\n    }\r\n};\r\n\r\nexport default function() {\r\n    const form = document.querySelector(\"#contactForm\");\r\n    const inputs = form.querySelectorAll(\"[required]\");\r\n\r\n    //wyłączamy domyślną walidację\r\n    form.setAttribute(\"novalidate\", true);\r\n\r\n    for (const el of inputs) {\r\n        el.addEventListener(\"input\", e => markFieldAsError(e.target, !e.target.checkValidity()));\r\n    }\r\n\r\n    form.addEventListener(\"submit\", e => {\r\n        e.preventDefault();\r\n\r\n        let formErrors = false;\r\n\r\n        //2 etap - sprawdzamy poszczególne pola gdy ktoś chce wysłać formularz\r\n        for (const el of inputs) {\r\n            removeFieldError(el);\r\n            el.classList.remove(\"field-error\");\r\n\r\n            if (!el.checkValidity()) {\r\n                createFieldError(el, el.dataset.errorText);\r\n                el.classList.add(\"field-error\");\r\n                formErrors = true;\r\n            }\r\n        }\r\n\r\n        if (!formErrors) {\r\n            const submit = form.querySelector(\"[type=submit]\");\r\n            submit.disabled = true;\r\n            submit.classList.add(\"loading\");\r\n\r\n            const formData = new FormData();\r\n            for (const el of inputs) {\r\n                formData.append(el.name, el.value)\r\n            }\r\n\r\n            const url = form.getAttribute(\"action\");\r\n            const method = form.getAttribute(\"method\");\r\n\r\n            fetch(url, {\r\n                method: method.toUpperCase(),\r\n                body: formData\r\n            })\r\n            .then(res => res.json())\r\n            .then(res => {\r\n                if (res.errors) {\r\n                    const selectors = res.errors.map(el => `[name=\"${el}\"]`);\r\n                    const fieldsWithErrors = form.querySelectorAll(selectors.join(\",\"));\r\n                    for (const el of fieldsWithErrors) {\r\n                        markFieldAsError(el, true);\r\n                        toggleErrorField(el, true);\r\n                    }\r\n                } else {\r\n                    if (res.status === \"ok\") {\r\n                        const div = document.createElement(\"div\");\r\n                        div.classList.add(\"form-send-success\");\r\n                        div.innerText = \"Wysłanie wiadomości się nie powiodło\";\r\n\r\n                        form.parentElement.insertBefore(div, form);\r\n                        div.innerHTML = `\r\n                            <strong>Wiadomość została wysłana</strong>\r\n                            <span>Dziękujemy za kontakt. Postaramy się odpowiedzieć jak najszybciej</span>\r\n                        `;\r\n                        form.remove();\r\n                    }\r\n                    if (res.status === \"error\") {\r\n                        //jeżeli istnieje komunikat o błędzie wysyłki\r\n                        //np. generowany przy poprzednim wysyłaniu formularza\r\n                        //usuwamy go, by nie duplikować tych komunikatów\r\n                        const statusError = document.querySelector(\".send-error\");\r\n                        if (statusError) {\r\n                            statusError.remove();\r\n                        }\r\n\r\n                        const div = document.createElement(\"div\");\r\n                        div.classList.add(\"form-send-error\");\r\n                        div.innerText = \"Wysłanie wiadomości się nie powiodło\";\r\n                        submit.parentElement.appendChild(div);\r\n                    }\r\n                }\r\n            }).finally(() => {\r\n                submit.disabled = false;\r\n                submit.classList.remove(\"loading\");\r\n            });\r\n        }\r\n    });\r\n}","const position = [20.99995, 52.23277];\r\nconst token = \"pk.eyJ1Ijoia2FydG9mZWxlazAwNyIsImEiOiJja2VteHNxbTQxMmlwMnNrN3Uycjd6YzVsIn0.PbT6WOIQhyeB40M2m8ClBw\";\r\nconst styleUrl = \"mapbox://styles/kartofelek007/cjlhvpfs60x942sqthhym92ln\";\r\n\r\nfunction map() {\r\n\tmapboxgl.accessToken = token;\r\n    const map = new mapboxgl.Map({\r\n        container: 'mainMap',\r\n        style: styleUrl,\r\n        zoom:13.7,\r\n        center: position\r\n    });\r\n\r\n    map.on(\"load\", function () {\r\n      map.loadImage(\"images/marker.png\", function(error, image) {\r\n          if (error) throw error;\r\n          map.addImage(\"custom-marker\", image);\r\n          map.addLayer({\r\n            id: \"markers\",\r\n            type: \"symbol\",\r\n            source: {\r\n              type: \"geojson\",\r\n              data: {\r\n                type: \"FeatureCollection\",\r\n                features:[{\"type\":\"Feature\",\"geometry\":{\"type\":\"Point\",\"coordinates\":position}}]}\r\n            },\r\n            layout: {\r\n              \"icon-image\": \"custom-marker\",\r\n            }\r\n          });\r\n        });\r\n    });\r\n}\r\n\r\nexport { map }","import { pageHeaderSticky } from \"./page-header\";\r\nimport makeForm from \"./_form\";\r\nimport {map} from \"./_map\";\r\n\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n    pageHeaderSticky();\r\n    makeForm();\r\n    map();\r\n});\r\n\r\n"],"names":["stickyHeader","pageHeader","document","querySelector","this","pageYOffset","classList","add","remove","removeFieldError","field","errorText","nextElementSibling","contains","createFieldError","text","div","createElement","innerText","parentElement","appendChild","insertBefore","toggleErrorField","show","style","display","setAttribute","markFieldAsError","position","addEventListener","media","window","matchMedia","matches","removeEventListener","addListener","form","inputs","querySelectorAll","e","target","checkValidity","preventDefault","formErrors","el","dataset","submit","disabled","formData","FormData","append","name","value","url","getAttribute","method","fetch","toUpperCase","body","then","res","json","errors","selectors","map","join","status","innerHTML","statusError","finally","makeForm","mapboxgl","accessToken","Map","container","zoom","center","on","loadImage","error","image","addImage","addLayer","id","type","source","data","features","layout"],"sourceRoot":""}